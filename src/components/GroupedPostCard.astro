---
import PostCard from './PostCard.astro';
import type { CollectionEntry } from 'astro:content';

interface Props {
  translations: CollectionEntry<'blog'>[];
}

const { translations }: Props = Astro.props;
const sortedTranslations = translations.sort((a, b) => a.data.language[0].localeCompare(b.data.language[0]));
const main = sortedTranslations[0];
---
<article class="post-card">
  <div class="folder-tabs">
    {sortedTranslations.map((post, idx) => (
      <a
        href={`/blog/${post.id}/`}
        class={`folder-tab${idx === 0 ? ' active' : ''}`}
      >
        {post.data.language[0] === 'en' ? 'ðŸ‡ºðŸ‡¸ Read in English' : 'ðŸ‡µðŸ‡· Leer en EspaÃ±ol'}
      </a>
    ))}
  </div>
  <div style="z-index: 1; position: relative;"> <PostCard post={main} />
</div>
</article>

<style>
  .folder-tabs {
    position: relative;
    height: 2.5em;
    margin-left: 2em;
    margin-bottom: 0;
    display: flex;
    align-items: flex-end;
    z-index: 0;
    gap: 0.5em;
  }
  .folder-tab {
    position: relative;
    top: 0;
    height: 2.5em;
    min-width: 8em;
    padding: 0.5em 1.5em 0.5em 1.5em;
    background: #e0e4ea;
    color: #222;
    border-top-left-radius: 0.7em;
    border-top-right-radius: 0.7em;
    border: 2px solid #bfc4cc;
    border-bottom: none;
    box-shadow: 0 2px 6px rgba(0,0,0,0.07);
    opacity: 0.7;
    font-weight: 500;
    transition: all 0.2s;
    cursor: pointer;
    z-index: 1;
    margin-right: -0.5em;
  }
  .folder-tab.active {
    background: #fff;
    color: #111;
    opacity: 1;
    z-index: 10;
    box-shadow: 0 4px 12px rgba(0,0,0,0.12);
    font-weight: 700;
    top: 0;
  }
  .folder-tab:hover {
    opacity: 1;
    background: #f5f7fa;
  }
  .post-card {
    position: relative;
    z-index: 2;
    margin-top: 0;
  }
</style>